/**
 * ReminderJS - Is a lightweight browser library written in vanilla JS for showing reminders.
 * 
 *
 * @author   Karthik Chengayan Sridhar (<https://github.com/karthikcsridhar>)
 * @version  1.0.0
 * @license  MIT
 * @see      <https://github.com/karthikcsridhar/reminderjs>
 */
!function(e){"use strict";function t(){return R}function n(e,t){return"time"==t?e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):e.toLocaleDateString([],{day:"2-digit",month:"2-digit"})}function i(){""===b||b||console.error(S+" requires a notificationsEndpoint to GET notifications from."),N.constructor!==Array&&console.error(S+" can only accept an array as reminderList."),C&&C.constructor!==Function&&console.error(S+" can only accept a function as callback.")}function o(){if(z)r(N);else if(T){var e=new XMLHttpRequest,t=b+"?ts="+(new Date).getTime();if(j)for(var n in j)j.hasOwnProperty(n)&&e.setRequestHeader(n,j[n]);e.open("GET",t,!0),e.onload=function(){r(N=JSON.parse(e.responseText))},e.send()}else console.info(S+" - No input list provided to process. ReminderJS will wait for input.")}function r(e){e.constructor===Array&&e.forEach(function(e){p(e,!1)})}function a(){for(var e in I)I.hasOwnProperty(e)&&clearTimeout(I[e]);I={},o()}function d(e){var t=new Date,n=new Date(t.getTime()+6e4*E);e.originalTimestamp||(e.originalTimestamp=e[g.timeStampField]),e[g.timeStampField]=n,p(e,!0)}function s(e,t,n,i){n.parentNode.removeChild(n),t.textContent="You will be reminded in "+E+" minutes!",setTimeout(function(){l(e,i)},1500)}function l(e,t){var n=0;e.classList.contains("animated")&&(e.classList.add("bounceOutLeft"),n=500),setTimeout(function(){e.parentNode.removeChild(e)},n),delete J[t[g.idField]]}function c(e){I[e]&&(clearTimeout(I[e]),delete I[e]),J[e]&&(J[e].parentNode.removeChild(J[e]),delete J[e])}function p(e,t){if(t||!I[e[g.idField]]&&!J[e[g.idField]]){var n=e[g.timeStampField];n.constructor!==Date&&(n=new Date(n));var i,o=n-new Date,r=0;o>0?r=o:e.originalTimestamp=e[g.timeStampField],i=setTimeout(function(){m(e)},r),I[e[g.idField]]=i}}function m(e){var t,i,o,r,a,c,p,m,f,u;(t=document.createElement("div")).classList.add("reminderJsItemContainer"),t.classList.add("reminder-js-info"),D.forEach(function(e){t.classList.add(e)}),e.originalTimestamp&&((p=document.createElement("div")).classList.add("reminder-js-due"),p.textContent="DUE",t.appendChild(p));var x=void 0!==e.originalTimestamp?e.originalTimestamp:e[g.timeStampField];x=x.constructor===Date?x:new Date(x),(r=document.createElement("div")).classList.add("reminder-js-time-panel"),(a=document.createElement("div")).textContent=n(x,"date"),r.appendChild(a),(c=document.createElement("div")).textContent=n(x,"time"),r.appendChild(c),t.appendChild(r),(m=document.createElement("div")).classList.add("reminder-js-action-btn-container"),t.appendChild(m),(f=document.createElement("strong")).textContent="Complete",f.classList.add("reminder-js-action-btn-completed"),m.appendChild(f),(u=document.createElement("strong")).textContent="Snooze",u.classList.add("reminder-js-action-btn-snooze"),m.appendChild(u),(i=document.createElement("span")).textContent=e[g.descriptionField],t.appendChild(i),(o=document.createElement("div")).className="reminderJsClose",o.innerHTML="&times;",t.appendChild(o),k.appendChild(t),L&&L(e),f.addEventListener("click",function(){l(this.parentNode.parentNode,e),w&&w(e)}),u.addEventListener("click",function(){s(this.parentNode.parentNode,i,m,e),d(e),y&&y()}),o.addEventListener("click",function(){l(this.parentNode,e)}),delete I[e[g.idField]],J[e[g.idField]]=t}function f(){var e;(k=document.getElementById("reminderjs-container"))||(e=document.createElement("div"),document.body.insertBefore(e,document.body.firstChild),k=e,v?k.classList.add("reminder-js-"+v):k.classList.add("reminder-js-topRight"))}function u(){var e,t=document.createElement("style");t.appendChild(document.createTextNode("")),document.body.appendChild(t),x(e=t.sheet,".reminder-js-info","background-color: #04a9f4; border: none; border-bottom: 3px solid #7473e8; color: #fff;"),x(e,".reminder-js-error","background-color: #04a9f4 /*#f51f1f*/; border: none; border-bottom: 3px solid #7473e8/*#d61b1b*/; color: #fff;"),x(e,".reminder-js-warning","background-color: #ffae42; border: none; border-bottom: 3px solid #dc963a; color: #fff;"),x(e,".reminder-js-due","display: inline-block; float: left; padding: 4px 7px; transform: rotate(-90deg); margin: -3px -6px 0px -16px; background: red;"),x(e,".reminderJsItemContainer","position: relative; border-radius: 2px; border: 1px solid; font-size: 14px; padding: 10px 0 10px 14px; font-family: inherit; margin: 5px 0;line-height: normal;"),x(e,".reminderJsItemContainer strong","float: left; margin-right: 6px; line-height: 1"),x(e,".reminderJsItemContainer span","display:table-cell; padding-right: 35px;"),x(e,".reminderJsClose","position: absolute; right: 10px; top: 3px; cursor: pointer; font-size: 26px; font-weight: bold;"),x(e,".reminder-js-topRight","width: 340px; position: absolute; right: 10px; top: 5px;"),x(e,".reminder-js-top","width: 340px; left: 50%; transform: translate(-170px,0); position: absolute; top: 5px;"),x(e,".reminder-js-bottom","width: 340px; left: 50%; transform: translate(-170px,0); position: absolute; bottom: 5px;"),x(e,".reminder-js-bottomRight","width: 340px; position: absolute; right: 10px; bottom: 5px;"),x(e,".reminder-js-topLeft","width: 340px; position: absolute; left: 10px; top: 5px;"),x(e,".reminder-js-bottomLeft","width: 340px; position: absolute; left: 10px; bottom: 5px;"),x(e,".reminder-js-action-btn-container","margin-left: -8px;"),x(e,".reminder-js-action-btn-completed","transform: translate(0px, -5px); background-color: #ffe100; border: none; border-radius: 2px; color: #222; cursor: pointer; display: inline-block; font-size: 12px; -webkit-font-smoothing: antialiased; font-weight: 600; line-height: 1; padding: 7px 5px; margin-right: 6px;"),x(e,".reminder-js-action-btn-snooze","transform: translate(0px, -5px); background-color: #ececec; border: none; border-radius: 2px; color: #222; cursor: pointer; display: inline-block; font-size: 12px; -webkit-font-smoothing: antialiased; font-weight: 600; line-height: 1; padding: 7px 5px; margin-right: 6px;"),x(e,".reminder-js-time-panel","display: inline-block; float: left; text-align: center; transform: translate(0, -5px); margin-right: 6px; font-size: 12px; min-width: 52px;")}function x(e,t,n,i){i=i||0,e.insertRule?e.insertRule(t+"{"+n+"}",i):e.addRule(t,n,i)}var h,b,g,v,C,w,L,y,E,j,k,T,F={serverBaseUrl:"http://localhost:3000",notificationsEndpoint:"",snoozeInterval:10,responsePayloadStructure:{idField:"id",titleField:"title",descriptionField:"description",timeStampField:"timestamp"},fetchReminders:!1},S="reminderJS",R=!1,z=!1,N=[],D=[],I={},J={};e.timerMap=I,e.nodeMap=J;var B={init:function(e){if(!R)return h=e.serverBaseUrl||h||F.serverBaseUrl,b=e.notificationsEndpoint||b||F.notificationsEndpoint,j=e.endpointHeaders||j,C=e.callback||C,E=e.snoozeInterval||F.snoozeInterval,v=e.position||v,g=e.responsePayloadStructure||g||F.responsePayloadStructure,N=e.reminderList||[],T=e.options||F.fetchReminders,D=e.cssClassList||[],w=e.completionCallback,y=e.snoozeCallback,L=e.reminderDisplayCallback,e.reminderList&&(z=!0),i(),f(),u(),R||(R=!0,o()),J;console.warn(S+" already initiated. Please do not call init again.")},refreshReminderList:function(e){return R||console.warn(S+" should be inititated with init() function first, before it can be refreshed"),N=e.reminderList||N,i(),a(),J},markReminderAsCompleteById:function(e){c(e)},isInitiated:t};"object"==typeof exports?module.exports=B:"function"==typeof define&&define.amd?define(function(){return B}):e.ReminderJS=B}(window);